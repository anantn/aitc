# HG changeset patch
# Parent d8e9c8848a2a2b97048c0061c1c4923d0aa2b686

diff --git a/dom/apps/src/Webapps.jsm b/dom/apps/src/Webapps.jsm
--- a/dom/apps/src/Webapps.jsm
+++ b/dom/apps/src/Webapps.jsm
@@ -55,16 +55,20 @@ let DOMApplicationRegistry = {
 
     try {
       let hosts = Services.prefs.getCharPref("dom.mozApps.whitelist");
       hosts.split(",").forEach(function(aHost) {
         Services.perms.add(Services.io.newURI(aHost, null, null), "webapps-manage",
                            Ci.nsIPermissionManager.ALLOW_ACTION);
       });
     } catch(e) { }
+
+    // nsIPrefBranch throws if pref does not exist, faster to simply write
+    // the pref instead of first checking if it is false.
+    Services.prefs.setBoolPref("apps.enabled", true);
   },
 
   observe: function(aSubject, aTopic, aData) {
     if (aTopic == "xpcom-shutdown") {
       this.messages.forEach((function(msgName) {
         ppmm.removeMessageListener(msgName, this);
       }).bind(this));
       Services.obs.removeObserver(this, "xpcom-shutdown");
